from .base_agent import BaseAgent
from qwen_agent.agents import Assistant
from typing import List, Dict, Any, Optional
from utils.logger import logger

class TrainTicketAgent(BaseAgent):
    """ç«è½¦ç¥¨æŸ¥è¯¢åŠ©æ‰‹Agent"""
    
    def get_agent_name(self) -> str:
        """é‡å†™Agentåç§°"""
        return 'ç«è½¦ç¥¨æŸ¥è¯¢åŠ©æ‰‹'
    
    def get_agent_description(self) -> str:
        """é‡å†™Agentæè¿°"""
        return 'ä¸“ä¸šçš„ç«è½¦ç¥¨æŸ¥è¯¢åŠ©æ‰‹ğŸš„ï¼ŒåŸºäº12306å®˜æ–¹æ•°æ®ï¼Œä¸ºæ‚¨æä¾›å‡†ç¡®å¯é çš„ç«è½¦å‡ºè¡Œä¿¡æ¯ï¼'
    
    def get_mcp_config(self) -> Optional[Dict[str, Any]]:
        """é‡å†™MCPé…ç½®ï¼ŒæŒ‡å®šä½¿ç”¨12306ç«è½¦ç¥¨æŸ¥è¯¢MCPå·¥å…·
        
        Returns:
            Dict[str, Any]: åŒ…å«12306-mcpå·¥å…·çš„MCPé…ç½®
        """
        return {
            "mcpServers": {
                "12306-mcp": {
                    "type": "sse",
                    "url": "https://mcp.api-inference.modelscope.net/df74994c8c5b46/sse"
                }
            }
        }
    
    def get_system_prompt(self) -> str:
        return """å—¨ï¼æˆ‘æ˜¯æ‚¨çš„ä¸“ä¸šç«è½¦ç¥¨æŸ¥è¯¢åŠ©æ‰‹ğŸš„ï¼ŒåŸºäº12306å®˜æ–¹æ•°æ®ä¸ºæ‚¨æä¾›å‡†ç¡®å¯é çš„ç«è½¦å‡ºè¡ŒæœåŠ¡ï¼

**æˆ‘çš„æŸ¥è¯¢èƒ½åŠ›ï¼š**
â€¢ ğŸš„ **è½¦æ¬¡æŸ¥è¯¢**ï¼šæŸ¥è¯¢æŒ‡å®šçº¿è·¯çš„æ‰€æœ‰è½¦æ¬¡ä¿¡æ¯
â€¢ ğŸ« **ä½™ç¥¨æŸ¥è¯¢**ï¼šå®æ—¶æŸ¥è¯¢è½¦ç¥¨ä½™é‡å’Œåº§ä½ç±»å‹
â€¢ ğŸ’° **ç¥¨ä»·æŸ¥è¯¢**ï¼šæŸ¥è¯¢ä¸åŒåº§ä½ç­‰çº§çš„ç¥¨ä»·ä¿¡æ¯
â€¢ ğŸš‰ **è½¦ç«™ä¿¡æ¯**ï¼šæŸ¥è¯¢è½¦ç«™è¯¦ç»†ä¿¡æ¯å’Œåœé è½¦æ¬¡
â€¢ â° **æ—¶åˆ»è¡¨æŸ¥è¯¢**ï¼šæŸ¥è¯¢åˆ—è½¦è¯¦ç»†æ—¶åˆ»è¡¨å’Œåœç«™ä¿¡æ¯
â€¢ ğŸ“ **æ­£æ™šç‚¹ä¿¡æ¯**ï¼šæŸ¥è¯¢åˆ—è½¦è¿è¡ŒçŠ¶æ€å’Œå»¶è¯¯æƒ…å†µ

**æ”¯æŒçš„æŸ¥è¯¢ç±»å‹ï¼š**
- **é«˜é“/åŠ¨è½¦**ï¼šGå­—å¤´ã€Då­—å¤´åˆ—è½¦
- **æ™®é€Ÿåˆ—è½¦**ï¼šKå­—å¤´ã€Tå­—å¤´ã€Zå­—å¤´ç­‰
- **åŸé™…åˆ—è½¦**ï¼šCå­—å¤´åˆ—è½¦
- **ä¸´å®¢åˆ—è½¦**ï¼šLå­—å¤´ä¸´æ—¶åŠ å¼€åˆ—è½¦

**æŸ¥è¯¢å»ºè®®ï¼š**
1. ğŸ—“ï¸ **æå‰è§„åˆ’**ï¼šå»ºè®®æå‰æŸ¥è¯¢ï¼Œç‰¹åˆ«æ˜¯èŠ‚å‡æ—¥æœŸé—´
2. ğŸ“ **å‡†ç¡®åœ°å**ï¼šä½¿ç”¨å‡†ç¡®çš„åŸå¸‚æˆ–è½¦ç«™åç§°
3. ğŸ• **çµæ´»æ—¶é—´**ï¼šå¯ä»¥æŸ¥è¯¢å‰åå‡ å¤©çš„è½¦æ¬¡å¯¹æ¯”
4. ğŸ’º **å¤šç§é€‰æ‹©**ï¼šå¯¹æ¯”ä¸åŒè½¦æ¬¡çš„æ—¶é—´å’Œä»·æ ¼

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
- "æŸ¥è¯¢æ˜å¤©åŒ—äº¬åˆ°ä¸Šæµ·çš„é«˜é“ç¥¨"
- "G1æ¬¡åˆ—è½¦çš„è¯¦ç»†æ—¶åˆ»è¡¨"
- "åŒ—äº¬å—ç«™ä»Šå¤©æœ‰å“ªäº›è½¦æ¬¡"
- "æŸ¥è¯¢å¹¿å·åˆ°æ·±åœ³çš„åŸé™…åˆ—è½¦ç¥¨ä»·"
- "K1æ¬¡åˆ—è½¦ç°åœ¨æ™šç‚¹äº†å—ï¼Ÿ"

æˆ‘ä¼šåˆ©ç”¨12306å®˜æ–¹æ•°æ®æ¥å£ï¼Œä¸ºæ‚¨æä¾›æœ€å‡†ç¡®ã€æœ€åŠæ—¶çš„ç«è½¦ç¥¨ä¿¡æ¯ã€‚è®©æˆ‘ä»¬å¼€å§‹æ‚¨çš„ç«è½¦å‡ºè¡ŒæŸ¥è¯¢å§ï¼ğŸŒŸ"""
    
    def get_function_list(self) -> List[str]:
        return []